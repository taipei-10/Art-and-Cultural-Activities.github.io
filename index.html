<!DOCTYPE html>
<html>
<head>
    <title>藝文活動 AR 導覽</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
        renderer="antialias: true; alpha: true">

        <a-camera gps-camera rotation-reader> </a-camera>

        <script>
            window.onload = () => {
                const scene = document.querySelector('a-scene');

                // 抓取 venues.json 資料
                fetch('venues.json')
                    .then(response => response.json())
                    .then(venues => {
                        venues.forEach(venue => {
                            const latitude = venue.lat;
                            const longitude = venue.lon;

                            // 建立 AR 物件
                            const entity = document.createElement('a-entity');
                            entity.setAttribute('gps-entity-place', `latitude: ${latitude}; longitude: ${longitude};`);
                            
                            // 設置文字
                            entity.setAttribute('text', {
                                value: `${venue.name}\n${venue.event}`,
                                align: 'center',
                                color: 'white',
                                width: 6,
                                wrapCount: 30,
                                side: 'double',
                                font: 'https://cdn.aframe.io/fonts/Exo2Bold.fnt'
                            });
                            
                            entity.setAttribute('look-at', '[gps-camera]');
                            entity.setAttribute('scale', '15 15 15');
                            entity.setAttribute('position', '0 5 0'); // 讓標籤高一點

                            // 加入場景
                            scene.appendChild(entity);
                        });
                    })
                    .catch(error => console.error('Error fetching venues:', error));
            };
        </script>
    </a-scene>
</body>
</html>
